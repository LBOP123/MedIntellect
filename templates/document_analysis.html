{% extends 'base.html' %}

{% block title %}文档分析 - 医疗智能问答系统{% endblock %}

{% block content %}
<div class="document-analysis-container">
    <h2>文档分析系统</h2>
    
    <div class="upload-section">
        <h3>上传文档</h3>
        <div class="file-upload">
            <p>支持的文件格式：TXT、DOC、DOCX、PDF、PNG等</p>
            <input type="file" id="document-upload" accept=".txt,.doc,.docx,.pdf,.png,.jpg,.jpeg">
            <label for="document-upload" class="upload-button"></label>
        </div>
    </div>

    <div class="analysis-options">
        <h3>分析选项</h3>
        <div class="options-grid">
            <label class="option-item">
                <input type="checkbox" name="analysis_type" value="pos_tagging" checked>
                词性标注
            </label>
            <label class="option-item">
                <input type="checkbox" name="analysis_type" value="ner" checked>
                实体识别
            </label>
            <label class="option-item">
                <input type="checkbox" name="analysis_type" value="summary" checked>
                文档摘要
            </label>
            <label class="option-item">
                <input type="checkbox" name="analysis_type" value="layout" checked>
                布局分析
            </label>
        </div>
    </div>

    <div class="batch-upload-section">
        <h3>批量文本分析</h3>
        <div class="file-upload">
            <p>上传数据集文件（支持CSV格式，文件需包含content列）</p>
            <input type="file" id="batch-upload" accept=".csv">
            <label for="batch-upload" class="upload-button"></label>
        </div>
    </div>

    <div class="analysis-results">
        <h3>分析结果</h3>
        <div class="results-tabs">
            <button class="tab-button active" data-tab="text-analysis">文本分析</button>
            <button class="tab-button" data-tab="layout-analysis">布局分析</button>
            <button class="tab-button" data-tab="clustering">文本聚类</button>
        </div>

        <div class="tab-content active" id="text-analysis">
            <div class="pos-tagging-results">
                <h4>词性标注结果</h4>
                <div class="result-content"></div>
            </div>
            <div class="ner-results">
                <h4>实体识别结果</h4>
                <div class="result-content"></div>
            </div>
            <div class="summary-results">
                <h4>文档摘要</h4>
                <div class="result-content"></div>
            </div>
        </div>

        <div class="tab-content" id="layout-analysis">
            <div class="layout-results">
                <h4>文档布局分析</h4>
                <div class="result-content"></div>
            </div>
        </div>

        <div class="tab-content" id="clustering">
            <div class="clustering-results">
                <h4>文本聚类结果</h4>
                <div class="tsne-visualization"></div>
                <div class="wordcloud-visualization"></div>
            </div>
        </div>

        <div class="download-section">
            <button id="download-results" class="download-button">下载分析结果</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/document_analysis.js"></script>
{% endblock %}